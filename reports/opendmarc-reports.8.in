.TH opendmarc-reports 8 "The Trusted Domain Project"
.SH NAME
.B opendmarc-reports
\- OpenDMARC aggregate report generation tool
.SH SYNOPSIS
.B opendmarc-reports
[options]
.SH DESCRIPTION
.B opendmarc-reports
pulls data from an OpenDMARC database and generates periodic aggregate
reports.  The database is populated by a running
.B opendmarc-import(8)
on a message history file generated by an
.B opendmarc(8)
filter as messages arrive and are processed.  This includes the collection
of reporting URIs, which this script uses to make reports available to those
that request them.
.SH OPTIONS
.TP
.I --day
Generate reports on day boundaries.  Overrides the value of
.I --interval
(see below).
.TP
.I --dbhost=hostname
Specifies the hostname on which the SQL server is running.  Defaults to
the value of the environment variable OPENDMARC_DBHOST, or "localhost" if
the environment variable is not set.
.TP
.I --dbname=name
Specifies the SQL database name to be accessed.  Defaults to
the value of the environment variable OPENDMARC_DB, or "opendmarc" if
the environment variable is not set.
.TP
.I --dbpasswd=password
Specifies the password for the SQL database to be accessed.  Defaults to
the value of the environment variable OPENDMARC_PASSWORD, or "opendmarc" if
the environment variable is not set.
.TP
.I --dbport=port
Specifies the TCP port on which the SQL server is expected to be listening.
Defaults to the value of the environment variable OPENDMARC_PORT, or 3306
if the environment variable is not set.
.TP
.I --dbuser=user
Specifies the SQL user to be used to access the database.  Defaults to
the value of the environment variable OPENDMARC_USER, or "opendmarc" if
the environment variable is not set.
.TP
.I --domain=name
Generates a report (if one is due) for the named domain, rather than checking
all of them.
.TP
.I --help
Prints a help message and terminates.
.TP
.I --interval=secs
Generates reports only for hosts that have not had a report generated in
at least the last
.I secs
seconds.
.TP
.I --nodomain=name
Skips generating a report for the named domain.  Can be specified multiple
times to skip multiple reporting domains.
.TP
.I --noupdate
Suppresses marking the time of the transmission of the report in the database.
Normally this would be done to prevent reports from being sent too close
together.
.TP
.I --report-email=addr
Generates reports using the specified address, which is used in the report
content and in the SMTP transaction.  The default is "postmaster@HOSTNAME"
where HOSTNAME is replaced by the hostname of the host generating the report.
.TP
.I --report-org=domain
Generates reports using the specified domain name as the organization
responsible for the report.  This is used to create the archive filename
and is included in the report content.  The default is the hostname of
the host generating the report.
.TP
.I --smtp-host=host
Causes reports to be sent by transmitting them using SMTP to the named
.I host
which can be an IP address or a hostname.  The default is "127.0.0.1".
.TP
.I --smtp-port=port
Causes reports to be sent by transmitting them using SMTP to the specified
.I port.
The default is 25.
.TP
.I --utc
Instructs the database to change to the UTC timezone when generating output.
Otherwise, the database default is used.
.TP
.I --verbose
Increase the amount of verbosity written to standard output.
.TP
.I --version
Print version number and exit.
.SH VERSION
This man page covers the version of
.I opendmarc-reports
that shipped with version @VERSION@ of
.I OpenDMARC.
.SH COPYRIGHT
Copyright (c) 2012, 2014, 2015, 2018, The Trusted Domain Project.
All rights reserved.
.SH SEE ALSO
.I opendmarc(8),
.I opendmarc.conf(5),
.I opendmarc-import(8)
